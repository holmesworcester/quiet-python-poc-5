# Demo-style playground config approximating protocols/message_via_tor/demo/demo.py
# Provides four identity panels and a monitor/commands area to exercise the same flow

version: 1.0
protocol: protocols/message_via_tor
layout: 2x2

windows:
  - id: identity1
    title: "Identity 1"
    position: [0, 0]
    aliases:
      # Create a new identity (name is first arg)
      create: "/api POST /identities name={1}"
      # Send a message from this identity (all remaining text)
      send: "/api POST /messages senderId={user} text={*}"
      # List inbox for this identity
      inbox: "/api GET /messages/{user}"
      # Invite another peer
      invite: "/api POST /identities/{user}/invite"
      # Join using an invite code
      join: "/api POST /identities/{user}/join invite={1}"
      # List peers for current identity
      peers: "/api GET /identities/{user}/peers"
      # Set the active identity ID for this panel
      use: "/define user {1}"
      # Show current variables for this panel
      whoami: "/define"
    default_command: "send {input}"

  - id: identity2
    title: "Identity 2"
    position: [0, 1]
    aliases:
      create: "/api POST /identities name={1}"
      send: "/api POST /messages senderId={user} text={*}"
      inbox: "/api GET /messages/{user}"
      invite: "/api POST /identities/{user}/invite"
      join: "/api POST /identities/{user}/join invite={1}"
      peers: "/api GET /identities/{user}/peers"
      use: "/define user {1}"
      whoami: "/define"
    default_command: "send {input}"

  - id: identity3
    title: "Identity 3"
    position: [1, 0]
    aliases:
      create: "/api POST /identities name={1}"
      send: "/api POST /messages senderId={user} text={*}"
      inbox: "/api GET /messages/{user}"
      invite: "/api POST /identities/{user}/invite"
      join: "/api POST /identities/{user}/join invite={1}"
      peers: "/api GET /identities/{user}/peers"
      use: "/define user {1}"
      whoami: "/define"
    default_command: "send {input}"

  - id: identity4
    title: "Identity 4"
    position: [1, 1]
    aliases:
      create: "/api POST /identities name={1}"
      send: "/api POST /messages senderId={user} text={*}"
      inbox: "/api GET /messages/{user}"
      invite: "/api POST /identities/{user}/invite"
      join: "/api POST /identities/{user}/join invite={1}"
      peers: "/api GET /identities/{user}/peers"
      use: "/define user {1}"
      whoami: "/define"
    default_command: "send {input}"

# Notes:
# - In each identity window use '/create NAME' to create an identity.
# - Use '/define user <identityId>' (or the 'use' alias) to set the identity id for that panel.
# - Typing plain text in an identity panel will send a message from that identity (default_command).
# - Use 'invite' in one panel and 'join <invite>' in another to connect peers.
# - You can run '/api POST /tick' or '/api GET /identities' from any window using the /api command.