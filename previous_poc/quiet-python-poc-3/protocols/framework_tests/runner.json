{
  "description": "Tests for test_runner.py: executes JSON tests, chains outputs, handles errors with detailed logs/state, permutations.",
  "tests": [
    {
      "given": {
        "mock_handler_json": {
          "commands": {
            "create": {
              "tests": [
                {
                  "given": {
                    "params": {
                      "text": "Hello"
                    }
                  },
                  "then": {
                    "return": {
                      "new_events": [
                        {
                          "text": "Hello"
                        }
                      ]
                    }
                  }
                }
              ]
            }
          }
        }
      },
      "then": {
        "results": [
          {
            "pass": true,
            "log": "Executed create, returned new_events"
          }
        ]
      },
      "description": "Basic execution of command test."
    },
    {
      "given": {
        "chain": [
          {
            "test": "create message",
            "output_to_next": "new_events[0]"
          },
          {
            "test": "project message",
            "use_prior": "newEvent"
          }
        ]
      },
      "then": {
        "results": [
          {
            "pass": true,
            "log": "Chained: created event, projected to state"
          }
        ]
      },
      "description": "Chains tests: uses output from first in second."
    },
    {
      "given": {
        "mock_test": {
          "given": {},
          "then": {
            "db": {}
          }
        },
        "simulate_error": "Validation failed"
      },
      "then": {
        "results": [
          {
            "pass": false,
            "error": "Validation failed: details..., state: {full db snapshot}"
          }
        ]
      },
      "description": "Handles error with detailed log and state snapshot."
    }
  ]
}