{
  "type": "blocked",
  "projector": {
    "description": "Handles blocked events tracking",
    "func": "projector.project",
    "tests": []
  },
  "job": "process_unblocked",
  "commands": {
    "process_unblocked": {
      "description": "Process blocked events to check if they can be unblocked",
      "func": "process_unblocked.execute"
    },
    "list": {
      "description": "Lists all blocked events",
      "func": "list.execute",
      "tests": [
        {
          "given": {
            "db": {
              "blocked": [
                {
                  "event_id": "evt_1",
                  "blocked_by_id": "missing_user",
                  "event_type": "message",
                  "reason": "User missing_user not found",
                  "created_at_ms": 1
                },
                {
                  "event_id": "evt_2",
                  "blocked_by_id": "missing_group",
                  "event_type": "channel",
                  "reason": "Group missing_group not found",
                  "created_at_ms": 2
                }
              ]
            },
            "params": {}
          },
          "then": {
            "return": {
              "api_response": {
                "blocked": [
                  {
                    "event_id": "evt_1",
                    "blocked_by": "missing_user",
                    "reason": "User missing_user not found"
                  },
                  {
                    "event_id": "evt_2",
                    "blocked_by": "missing_group",
                    "reason": "Group missing_group not found"
                  }
                ]
              }
            }
          }
        }
      ]
    }
  }
}